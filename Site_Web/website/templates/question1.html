{% extends "base.html" %}
{% block title %}Vêlages et pleine lune{% endblock %}
{% block content %}
<h1>Les données</h1>
<h5>Une croyance populaire chez certains éleveurs est que les naissances arrivent plus souvent à la pleine lune.<br>Est-ce vrai ou pas ?</h5>
<p>
    Il nous faut créer un graphique du pourcentage de vêlages sur 28 jours.<br>
    Afin d'avoir des données objectives sur le sujet, on va analyser les vêlages sur l'ensemble de la base de données, c'est-à-dire du 3/10/1990 au 19/12/2020.<br>
</p>
<h3>Représentation par tableau</h3>
<p>Nombre total de vêlages par jour du cycle lunaire du 3 Octobre 1990 au 19 Décembre 2020</p>
<table style="width:100%">
    <thead>
        <tr>
            <th>{{ labels[0] }}</th>
            <th>{{ labels[1] }}</th>
            <th>{{ labels[2] }}</th>
            <th>{{ labels[3] }}</th>
            <th>{{ labels[4] }}</th>
            <th>{{ labels[5] }}</th>
            <th>{{ labels[6] }}</th>
            <th>{{ labels[7] }}</th>
            <th>{{ labels[8] }}</th>
            <th>{{ labels[9] }}</th>
            <th>{{ labels[10] }}</th>
            <th>{{ labels[11] }}</th>
            <th>{{ labels[12] }}</th>
            <th style="color:red;">{{ labels[13] }}</th>
            <th>{{ labels[14] }}</th>
            <th>{{ labels[15] }}</th>
            <th>{{ labels[16] }}</th>
            <th>{{ labels[17] }}</th>
            <th>{{ labels[18] }}</th>
            <th>{{ labels[19] }}</th>
            <th>{{ labels[20] }}</th>
            <th>{{ labels[21] }}</th>
            <th>{{ labels[22] }}</th>
            <th>{{ labels[23] }}</th>
            <th>{{ labels[24] }}</th>
            <th>{{ labels[25] }}</th>
            <th>{{ labels[26] }}</th>
            <th>{{ labels[27] }}</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{ values[0] }}</td>
            <td>{{ values[1] }}</td>
            <td>{{ values[2] }}</td>
            <td>{{ values[3] }}</td>
            <td>{{ values[4] }}</td>
            <td>{{ values[5] }}</td>
            <td>{{ values[6] }}</td>
            <td>{{ values[7] }}</td>
            <td>{{ values[8] }}</td>
            <td>{{ values[9] }}</td>
            <td>{{ values[10] }}</td>
            <td>{{ values[11] }}</td>
            <td>{{ values[12] }}</td>
            <td style="color:red;">{{ values[13] }}</td>
            <td>{{ values[14] }}</td>
            <td>{{ values[15] }}</td>
            <td>{{ values[16] }}</td>
            <td>{{ values[17] }}</td>
            <td>{{ values[18] }}</td>
            <td>{{ values[19] }}</td>
            <td>{{ values[20] }}</td>
            <td>{{ values[21] }}</td>
            <td>{{ values[22] }}</td>
            <td>{{ values[23] }}</td>
            <td>{{ values[24] }}</td>
            <td>{{ values[25] }}</td>
            <td>{{ values[26] }}</td>
            <td>{{ values[27] }}</td>
            <td>{{ somme }}</td>
        </tr>
    </tbody>
</table><br>
<h3>Représentation graphique</h3><br>
<h5 style="text-align:center">Bar chart du pourcentage de vêlages par jour du cycle lunaire du 3 Octobre 1990 au 19 Décembre 2020</h5>
<canvas id="graphique1" width="50" height="25" class="chartjs-render-monitor" style="display: block; width: 0px; height: 0px;"></canvas><br>
<p>Maintenant que nous disposons de données suffisantes pour répondre à la question, on peut constater que la réponse est <b>non</b>.<br>
    En effet, le pourcentage de naissances n'est pas plus élevé le jour de la pleine lune (J14) par rapport aux autres jours du cycle lunaire et reste plutôt dans la moyenne.<br>
    On peut même noter que le lendemain de la nouvelle lune (J1) enregistre un pourcentage généralement plus élevé de naissances tandis que le 19ème jour enregistre un pourcentage significativement plus bas.</p>


<script>
var ctx = document.getElementById('graphique1').getContext('2d');
var chartData = {
    labels : [
    {% for item in labels %}
    "{{ item }}",
    {% endfor %}
    ],
    datasets : [{
        label : "% de vêlages",
        fill : true,
        lineTension : 0.1,
        backgroundColor : ["rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(255, 0, 0, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)", "rgba(0, 100, 200, 0.5)"],
        borderColor : ["rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(255, 0, 0, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)", "rgba(0, 100, 200, 1)"],
        borderWidth: 1,
        data : [
        {% for compte in values %}
        {% set perc = 100*(compte / somme) %}
        "{{ perc|round(2) }}",
        {% endfor %}
        ],
        spanGaps : false
    }]
};
var myChart = new Chart(ctx, {
    type: 'bar',
    data: chartData,
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
{% endblock %}
